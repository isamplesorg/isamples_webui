<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>iSamples Records</title>
    <script type="application/ld+json">
      {
          "@context":"https://schema.org/",
          "@type":"WebPage",
          "@id":"index.html",
          "creator": {
              "@id": "#isamples-project"
          },
          "contributor": {
            "@type": "Person",
            "@id": "https://orcid.org/0000-0002-6513-4996",
            "name": "Dave Vieglais"
          },
          "keywords": ["iSamples", "physical-samples", "NSF-Project"],
          "description":"Web interface for iSamples Central or Box",
          "url":"https://isamplesorg.github.io/isamples_webui/",
          "archivedAt":"https://github.com/isamplesorg/isamples_webui",
          "dateCreated":"2021-10-08",
          "dateModified":"2021-10-08",
          "isPartOf":"https://github.com/isamplesorg"
      }
    </script>
    <script type="application/ld+json" id="isamples-project">
    {
        "@context": "https://schema.org/",
        "@graph": [
            {
                "@type": "ResearchProject",
                "@id": "#isamples-project",
                "name": "Collaborative Research: Frameworks: Internet of Samples: Toward an Interdisciplinary Cyberinfrastructure for Material Samples",
                "funder": {"@id": "nsf"},
                "sponsor": {"@id": "nsf"}
            },
            {
                "@type": "MonetaryGrant",
                "url": "https://nsf.gov/awardsearch/showAward?AWD_ID=2004839",
                "fundedItem": {"@id": "#isamples-project"}
            },
            {
                "@type": "MonetaryGrant",
                "url": "https://nsf.gov/awardsearch/showAward?AWD_ID=2004562",
                "fundedItem": {"@id": "#isamples-project"}
            },
            {
                "@type": "MonetaryGrant",
                "url": "https://nsf.gov/awardsearch/showAward?AWD_ID=2004642",
                "fundedItem": {"@id": "#isamples-project"}
            },
            {
                "@type": "MonetaryGrant",
                "url": "https://nsf.gov/awardsearch/showAward?AWD_ID=2004815",
                "fundedItem": {"@id": "#isamples-project"}
            },
            {
                "@type": "Organization",
                "@id": "nsf",
                "name": "National Sicence Foundation",
                "url": "https://nsf.gov/",
                "identifier": [
                    "https://ror.org/021nxhr62",
                    "https://grid.ac/institutes/grid.431093.c",
                    "https://www.wikidata.org/wiki/Q304878"
                    ]
            }
        ]
    }
    </script>
    <script src="https://unpkg.com/js-event-bus@1.1.1/src/index.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/tabulator-tables@4.9.3/dist/css/tabulator.min.css">
    <!-- Githuub project link webcomponent -->
    <script type="module" src="https://unpkg.com/gh-corner-wc/gh-corner.js?module"></script>
    <script>
        /**
         * Define the service endpoint for accessing data.
         *
         * Override if necessary (e.g. for local development) with a `local_config.js` file.
         *
         * @type {string} URL of service endpoint
         */
        var SERVICE_ENDPOINT = "https://mars.cyverse.org";

        /**
         * The eventBus is used for cross component communications.
         *
         * Query and filter state changes are notified through the eventBus.
         *
         * @type {EventBus}
         */
        const eventBus = new EventBus();
    </script>
    <script onerror="console.warn('No local configuration, using defaults')" src="local_config.js"></script>

    <!-- Webcomponent for manging overall query state -->
    <script type="module" src="js/isamples-state.js"></script>

    <script type="module" src="js/isamples-summary.js"></script>

    <!-- Table component-->
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.min.js"></script>
    <!-- js library pretty print json -->
    <link rel=stylesheet href=https://cdn.jsdelivr.net/npm/pretty-print-json@1.1/dist/pretty-print-json.css>
    <script src=https://cdn.jsdelivr.net/npm/pretty-print-json@1.1/dist/pretty-print-json.min.js></script>
    <link rel="stylesheet" href="css/common.css"/>

    <!-- customization of the behavior of the record table -->
    <script type="text/javascript" src="js/records.js"></script>
    <style>
        #records {
            height: 40vh;
        }


        .infoContainer {
            margin-top:1.0rem;
            display: flex;
            flex-direction: row;
            height: calc(100% - 25px);
            height: -moz-calc(100% - 25px);
            height: -webkit-calc(100% - 25px);
            box-sizing: border-box;
        }

        .infoChild {
            width: 50%;
            background-color: white;
        }

        div.infoChild pre {
            padding-top: 0;
            padding-left: 0;
            padding-bottom: 0;
            padding-right: 0;
            margin-top: 0;
            margin-right: 0.5rem;
            white-space: pre-wrap;
            border: 1px dotted grey;
            font-family: var(--mono-font);
        }
        .infoChild pre span {
            font-size: inherit;
        }

        .tabulator {
            font-family: var(--mono-font);
            font-size: inherit;
            vertical-align: auto;
        }

        .tabulator-row .tabulator-cell{
            padding-top:4px;
            padding-bottom: 0;
            padding-left: 4px;
            padding-right: 4px;
            vertical-align: center;
        }

        .tabulator-row.tabulator-row-even {
            background: #ffffff;
        }
        .tabulator-row.tabulator-row-odd {
            background: #ffffff;
        }
        .tabulator-row.tabulator-selected {
            background-color: lightblue;
        }

        .tabulator-page {
            color: #333333;
            font-size: inherit;
        }
        .records-footer {
            float: left;
        }
    </style>
</head>
<body>
<main>
    <gh-corner user="isamplesorg" repo=""></gh-corner>

    <section id="query-section">
        <isamples-state id="query-state"></isamples-state>
        <details>
            <summary>Summary</summary>
            <isamples-summary id="summary" queryStateId="query-state"></isamples-summary>
        </details>
    </section>

    <section>
        <div id="records">
        </div>
    </section>

    <details open>
        <summary>Selected Row Record</summary>
        <section class="infoContainer">
            <div class="infoChild" id="InfoLeft" >
                <span class="label">Source Record</span>
                <pre id="record_original">

                    Select a row to view source record.
                </pre>
            </div>
            <div class="infoChild" id="InfoRight">
                <details>
                    <summary>iSamples Solr Record</summary>
                    <pre id="record_solr">

                        Select a row to view solr record.
                    </pre>
                </details>
                <details open>
                    <summary>iSamples Core Record</summary>
                    <pre id="record_xform">

                        Select a row to view transformed record.
                    </pre>
                </details>
            </div>
        </section>
    </details>
</main>
<footer>
    <p>Placeholder</p>
</footer>
<script>
    /**
     * Initialize the records view once the DOM has loaded.
     */
    window.onload = function() {
        recordsOnLoad('records');
    }
</script>
</body>
</html>