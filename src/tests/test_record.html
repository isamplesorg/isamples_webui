<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>    
    <!--
    Describe this page
    -->
    <style>
        .identifier {
            cursor: pointer;
        }
    </style>
    <script type="module">
import {ISamplesAPI} from '../js/isamples-api.js';
import {ISamplesRecord} from '../js/isamples-record.js';

let API = new ISamplesAPI();

async function loader(identifier, format) {
    const rele = document.getElementById("record-view");
    const record = await rele.setData(API.thing(identifier, format), format);
    const ele = document.getElementById("record");
    ele.innerText = JSON.stringify(record,null,2);
}

document.getElementById("load_original_record").onclick = () => {
    loader(document.getElementById("record_pid").value, "original");
};
document.getElementById("load_core_record").onclick = () => {
    loader(document.getElementById("record_pid").value, "core");
};
document.getElementById("load_solr_record").onclick = () => {
    loader(document.getElementById("record_pid").value, "solr");
};

for (const e of document.getElementsByClassName("identifier")){
    e.onclick = () => {
        let t = document.getElementById("record_pid");
        t.value = e.innerText;
    }
};

</script>
</head>
<body>
    <header></header>
    <section>
        <p>Enter a PID to retrieve the record. e.g.:</p>
        <ul>
            <li class="identifier">IGSN:NHB0005JH</li>
            <li class="identifier">ark:/65665/3f9782515-ef3b-40b0-97b3-0f30c5b0db03</li>
            <li class="identifier">ark:/21547/ANX2USGS_DRO_187009</li>
            <li class="identifier">ark:/28722/k2028tb6n</li>
        </ul>
        <input type="text" id="record_pid" size="80"></input>
        <input type="button" id="load_original_record" value="Go Original"></input>
        <input type="button" id="load_core_record" value="Go Core"></input>
        <input type="button" id="load_solr_record" value="Go Solr"></input>
        <h3>Rendered view:</h3>
        <isamples-record id="record-view"></isamples-record>
        <h3>Record source:</h3>
        <pre id="record" style="white-space:pre-wrap;overflow-y:auto;"></pre>
    </section>
    <footer></footer>
</body>
</html>